

ğŸ“Œ zlm4j ğŸ“Œ

[![star](https://gitee.com/aizuda/zlm4j/badge/star.svg?theme=white)](https://gitee.com/aizuda/zlm4j/stargazers)  [![fork](https://gitee.com/aizuda/zlm4j/badge/fork.svg?theme=white)](https://gitee.com/aizuda/zlm4j/members)

## ğŸ˜ é¡¹ç›®æ–‡æ¡£
[é£ä¹¦æ–‡æ¡£ç›´è¾¾ https://ux5phie02ut.feishu.cn/wiki/NA2ywJRY2ivALSkPfUycZFM4nUB?from=from_copylink ](https://ux5phie02ut.feishu.cn/wiki/NA2ywJRY2ivALSkPfUycZFM4nUB?from=from_copylink)

## ğŸ˜ é¡¹ç›®ç®€ä»‹
**zlm4jå¼€æºæµåª’ä½“æœåŠ¡æ¡†æ¶ ZLMediaKit C Api çš„ Java å®ç°**

æ„Ÿè°¢ [@å¤æ¥š](https://github.com/xia-chu) æä¾›ä¼˜ç§€çš„å¼€æºæµåª’ä½“æœåŠ¡æ¡†æ¶ [ZLMediaKit ](https://github.com/ZLMediaKit/ZLMediaKit)

æœ¬é¡¹ç›®æ˜¯å¯¹ ZLMediaKit æä¾›çš„ C Api çš„ Java Api å°è£…(éƒ¨åˆ†å°è£…)ã€‚é‡‡ç”¨ JNA å¯¹ ZLMediaKit C Api è¿›è¡Œè§£æï¼Œå¹¶åŸºäºåŸå§‹è°ƒç”¨é£æ ¼è¿›è¡Œå¾®è°ƒå’Œä¿®æ”¹ï¼Œæ–¹ä¾¿å¼€å‘è€…å‚ç…§ ZLMediaKit é¡¹ç›®æ–‡æ¡£è¿›è¡Œåº”ç”¨ç¨‹åºå¼€å‘ã€‚

ä½¿ç”¨æ­¤é¡¹ç›®å¯å®ç°ç°æœ‰é¡¹ç›®å¿«é€Ÿé›†æˆæµåª’ä½“æœåŠ¡åŠŸèƒ½ï¼Œæ— éœ€éƒ¨ç½²é¢å¤–æœåŠ¡å™¨ï¼Œåˆ©ç”¨æµäº‹ä»¶å›è°ƒä¾¿äºæ“ä½œæµ(æ¨æ‹‰æµé‰´æƒã€æŒ‰éœ€æ‹‰æµã€è‡ªåŠ¨å…³æµã€åè®®è½¬æ¢ã€æˆªå›¾ã€å½•åˆ¶ã€å›½æ ‡GBæ¨æµ)ã€‚

## ğŸ˜ ç‰ˆæœ¬æ›´æ–°
- v1.7.2 åŸºäº2025-11-26-masteråˆ†æ”¯å¼€å‘ï¼š1.ä¼˜åŒ–éƒ¨åˆ†åŠŸèƒ½
- v1.7.1 åŸºäº2025-11-4-masteråˆ†æ”¯å¼€å‘ï¼š1.ä¼˜åŒ–éƒ¨åˆ†åŠŸèƒ½
- v1.7.0 åŸºäº2025-10-16-masteråˆ†æ”¯å¼€å‘ï¼šå¢åŠ æ›´å¤šè§†é¢‘ç¼–ç æ”¯æŒ
- v1.6.1 å‡çº§jnaåˆ°æœ€æ–°ç‰ˆæœ¬
- v1.6.0 åŸºäº2025-09-264-masteråˆ†æ”¯ç¼–è¯‘å¼€å‘ 1.å¢åŠ webrtcæ¨æ‹‰æµä»£ç† 2.å¢åŠ webrtc p2pæ¨¡å¼åŠç›¸å…³å‡½æ•° 3.ä¼˜åŒ–éƒ¨åˆ†åŠŸèƒ½
- v1.5.3 åŸºäº2025-9-11-masteråˆ†æ”¯å¼€å‘ï¼šä¿®å¤ä¼˜åŒ–éƒ¨åˆ†åŠŸèƒ½
- v1.5.3 åŸºäº2025-9-11-masteråˆ†æ”¯å¼€å‘ï¼šä¿®å¤ä¼˜åŒ–éƒ¨åˆ†åŠŸèƒ½
- v1.5.2 åŸºäº2025-8-11-masteråˆ†æ”¯å¼€å‘ï¼šæ–°å¢mk_media_source_set_speedå‡½æ•°
- v1.5.1 åŸºäº2025-8-11-masteråˆ†æ”¯å¼€å‘ï¼šä¿®å¤ä¼˜åŒ–éƒ¨åˆ†åŠŸèƒ½
- v1.5.0 åŸºäº2025-8-9-masteråˆ†æ”¯å¼€å‘ï¼šæ–°å¢å½•åˆ¶ä»»åŠ¡ã€RTPå¤šè·¯å¤ç”¨ç­‰æ¥å£ï¼Œæ”¯æŒæµé€Ÿé…ç½®
- æ›´å¤šç‰ˆæœ¬æ›´æ–°è¯·æŸ¥çœ‹å®Œæ•´æ›´æ–°æ—¥å¿—

## ğŸ˜ SDKåŠŸèƒ½
- **æµåª’ä½“æœåŠ¡**ï¼šæ”¯æŒHTTP/RTSP/RTMPç«¯å£è‡ªå®šä¹‰ï¼Œå…¼å®¹ZLMediaKité…ç½®
- **æ¨æµ**ï¼šæ”¯æŒRTSP/RTMP/RTC/SRT/GB28181/WebRTCåè®®ï¼Œæ”¯æŒæ¨æµé‰´æƒ
- **æ‹‰æµ**ï¼šæ”¯æŒRTSP/RTMP/FLV/HLS/FMP4ç­‰åè®®è¾“å‡º
- **ä»£ç†åŠŸèƒ½**ï¼šæ”¯æŒæ‹‰æµæ¥å…¥ï¼Œå…·å¤‡é‰´æƒã€æŒ‰éœ€æ‹‰æµã€è‡ªåŠ¨å…³æµã€æµé‡ç»Ÿè®¡
- **å½•åˆ¶åŠŸèƒ½**ï¼šæ”¯æŒMP4/FLV/M3U8æ ¼å¼ï¼Œæ”¯æŒMP4åˆ†ç‰‡æ§åˆ¶
- **äº‹ä»¶å›è°ƒ**ï¼šæ”¯æŒæµä¸Šä¸‹çº¿ã€æ¨æ‹‰æµã€å½•åˆ¶å®Œæˆã€æ— äººè§‚çœ‹ã€RTSPé‰´æƒç­‰å›è°ƒ

## ğŸ˜ é¡¹ç›®ç»„æˆ
1. é¡¹ç›®åŒ…å«win64/linux64/linux_arm64/mac64/mac_arm64åŠ¨æ€åº“(mk_api.dll/libmk_api.so/libmk_api.dylib)ï¼Œå…¶ä»–ç³»ç»Ÿå¯è‡ªè¡Œç¼–è¯‘å¹¶æ”¾ç½®å¯¹åº”ç›®å½•
2. é…ç½®æ–‡ä»¶resources/conf.iniï¼Œé…ç½®æ–¹å¼å‚è§ç¤ºä¾‹ä»£ç 
3. é¡¹ç›®åŒ…å«coreã€callbackã€structureæ¨¡å—
   - **core**ï¼šæ ¸å¿ƒAPIå°è£…
   - **callback**ï¼šå›è°ƒæ¥å£å®ç°
   - **structure**ï¼šç»“æ„ä½“å®šä¹‰ï¼ˆå«é»˜è®¤dwSizeå‚æ•°ï¼‰

## ğŸ˜ ç¤ºä¾‹ä»£ç 
```java
public class Test {
    //åŠ¨æ€é“¾æ¥åº“è‡ªåŠ¨åŠ è½½
    public static ZLMApi ZLM_API = Native.load("mk_api", ZLMApi.class);

    public static void main(String[] args) throws InterruptedException {
        //åˆå§‹åŒ–SDK
        ZLM_API.mk_env_init2(1, 1, 1, null, 0, 0, null, 0, null, null);
        
        //é…ç½®æœåŠ¡å™¨å‚æ•°
        MK_INI mkIni = ZLM_API.mk_ini_default();
        ZLM_API.mk_ini_set_option(mkIni, "general.mediaServerId", "JMediaServer");
        
        //æ³¨å†Œå…¨å±€å›è°ƒ
        MK_EVENTS mkEvents = new MK_EVENTS();
        mkEvents.on_mk_media_changed = (regist, sender) -> {
            System.out.println("æµçŠ¶æ€å˜åŒ–: " + regist);
        };
        
        //å¯åŠ¨æœåŠ¡
        ZLM_API.mk_events_listen(mkEvents);
        short httpPort = ZLM_API.mk_http_server_start((short)7788, 0);
        short rtspPort = ZLM_API.mk_rtsp_server_start((short)554, 0);
        
        // ... å¯åŠ¨å…¶ä»–æœåŠ¡
        
        //é˜»å¡å¹¶é‡Šæ”¾èµ„æº
        Thread.sleep(60000L);
        ZLM_API.mk_stop_all_server();
    }
}
```

## ğŸ˜ é›†æˆæ–¹å¼
1. å¯ç›´æ¥å¤åˆ¶ä»£ç åˆ°é¡¹ç›®è¿›è¡ŒäºŒæ¬¡å¼€å‘
2. Mavenä¸­å¤®ä»“åº“é›†æˆï¼š
```xml
<dependency>
    <groupId>com.aizuda</groupId>
    <artifactId>zlm4j</artifactId>
    <version>${lasted}</version>
</dependency>
```

## ğŸ˜ é¸£è°¢
æ„Ÿè°¢JetBrainså¯¹å¼€æºé¡¹ç›®çš„æ”¯æŒï¼Œé¡¹ç›®ä½¿ç”¨CLion/IDEAè¿›è¡Œå¼€å‘è°ƒè¯•

## ğŸ˜ å¸¸è§é—®é¢˜
1. å‚è§ [ZLM4Jå¸¸è§é—®é¢˜ ](https://ux5phie02ut.feishu.cn/wiki/SzIAwyxnpilVMlkccS4cfJFGn1g)

## ğŸ˜ å­¦ä¹ æ¢è®¨
æ‰«ç åŠ å…¥äº¤æµç¾¤è·å–æœ€æ–°åŠ¨æ€ï¼š
![äº¤æµç¾¤äºŒç»´ç ](doc/images/qun.jpg)
